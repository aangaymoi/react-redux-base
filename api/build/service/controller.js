"use strict";var _debug=_interopRequireDefault(require("debug"));Object.defineProperty(exports,"__esModule",{value:!0}),exports.Controller=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}const log=(0,_debug.default)("api:service:controller");class Controller{constructor(a,b){_defineProperty(this,"auth",void 0),_defineProperty(this,"handler",void 0),_defineProperty(this,"handle",async(a,b,c)=>{const d=a.get("uuid"),e=await this.auth.check(d);if(e!==void 0)b.set("uuid",e),this.handler.handle(a,b,c);else{const c=await this.handler.format(a.get("X-Device"),a.get("X-Locate"),!1,{errors:["Unauthorized"]});b.status(401).send(c)}}),this.auth=a,this.handler=b}}exports.Controller=Controller;
//# sourceMappingURL=controller.js.map