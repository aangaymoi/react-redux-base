"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Listing=void 0;var _debug=_interopRequireDefault(require("debug")),_authorize=require("../authorize"),_controller=require("../controller"),_user=_interopRequireDefault(require("../../repo/user"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}const log=(0,_debug.default)("api:service:user:listing");class Listing{constructor(){_defineProperty(this,"handle",async(a,b)=>{let{field:c,order:d,offset:e,limit:f}=a.query;const g=[];if(c||g.push(`"field" must be specified`),g.length){const c=await this.format(a.get("X-Device"),a.get("X-Locate"),!1,{errors:g});return b.status(400).send(c)}d="asc"===d?"asc":"desc",f=0<=parseInt(f)?parseInt(f):10,e=0<=parseInt(e)?parseInt(e):0;const h=await _user.default.listing(c,{order:d,limit:f,offset:e}),i=await this.format(a.get("X-Device"),a.get("X-Locate"),!0,{users:h});return b.status(200).send(i)}),_defineProperty(this,"format",(a,b,c,d)=>{switch(a){// case 'mobile':
// case 'tablet':
case"desktop":default:switch(b){case"en-US":default:return Promise.resolve({success:c,payload:d});}}})}}exports.Listing=Listing;const listing=new _controller.Controller(new _authorize.Admin(),new Listing());var _default=listing;exports.default=_default;
//# sourceMappingURL=listing.js.map