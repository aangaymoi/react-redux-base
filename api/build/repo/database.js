"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.disconnect=exports.connect=void 0;var _debug=_interopRequireDefault(require("debug")),_coreJs=require("core-js");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}const log=(0,_debug.default)("api:repo:database"),sqlite3=require("sqlite3").verbose();let database=new sqlite3.Database("database.sqlite");const initial=(a,b)=>{a.run(`create table if not exists user (_id integer primary key autoincrement, type text default 'user', uuid text, name text, email text unique, password text, last_access datetime default current_timestamp, created_at datetime default current_timestamp, updated_at datetime default current_timestamp);`),b()},connect=async()=>new Promise(a=>database.open?a():void(0,_coreJs.setInterval)(()=>{database.open&&initial(database,a)},250));exports.connect=connect;const disconnect=async()=>new Promise(a=>database.open?void database.close(()=>a()):a());exports.disconnect=disconnect;var _default=database;exports.default=_default;
//# sourceMappingURL=database.js.map